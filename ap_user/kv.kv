#: import HomeScreen home.home
#: include home/home.kv

#: import OrdersScreen,OrderCreate orders.orders
#: include orders/orders.kv

#: import LoginScreen,DialogIp login.login
#: include login/login.kv

#: import QrScreen,QrDialog,ScanAnalyze,QrPrinter,Check scan.scan
#: include scan/scan.kv

<RmScreenManager>

<Progress>
    id: progress
    pos_hint: {'center_x': .5, 'center_y': .5}
    size_hint: None, None
    size: "49dp", "50dp"
    md_bg_color: app.theme_cls.transparentColor

    MDCircularProgressIndicator:
        size_hint: None, None
        size: "48dp", "48dp"
        pos_hint: {'center_x': .5, 'center_y': .5}

<Snack>
    y: dp(14)
    orientation: "horizontal"
    pos_hint: {"center_x": .5, "center_y": .5}
    size_hint_x: .5

    MDSnackbarSupportingText:
        id: snack_text
        pos_hint: {"center_x": .5}

<BaseMDNavigationItem>

    MDNavigationItemIcon:
        icon: root.icon

    MDNavigationItemLabel:
        text: root.text


MDBoxLayout:
    orientation: "vertical"
    md_bg_color: app.theme_cls.backgroundColor
    
    MDTopAppBar:
        type: "small"
        id: box_header
        theme_bg_color: "Custom"
        id: title_ap
        md_bg_color: app.theme_cls.primaryColor

        MDTopAppBarLeadingButtonContainer:

            MDActionTopAppBarButton:
                id: switch_theme
                icon: 'theme-light-dark'
                on_release: app.switch_theme_style()

        MDTopAppBarTitle:
            id: title_text
            text: "Hoja de Ruta"
            font_style: "Title"
            bold: True  

        MDTopAppBarTrailingButtonContainer:
            pos_hint: {"center_x": 1}

            MDActionTopAppBarButton:
                icon: "account-circle-outline"
                id: btn_log
                on_press: 
                    root.ids.screen_manager.login_out(btn_log, [home_btn, qr_btn, order_btn])
                    root.ids.qr_screen.close_cam()
 
    RmScreenManager:
        id: screen_manager

        LoginScreen:
            id: login_screen
        
        HomeScreen:
            id: home_screen

        QrScreen:
            id: qr_screen

        OrdersScreen:
            id: orders_screen

        OrderCreate:
            id: order_create
        
        QrPrinter:
            id: qr_printer

    MDNavigationBar:
        radius: 50, 50, 0, 0
        md_bg_color: app.theme_cls.secondaryContainerColor
        line_color: self.theme_cls.primaryColor

        BaseMDNavigationItem
            id: home_btn
            icon: "home"
            text: "Home"
            disabled: True
            on_press: 
                screen_manager.current= 'homescreen'
                screen_manager.progress(home_screen)
            on_release:
                qr_screen.close_cam()
                home_screen.get_order()                

        BaseMDNavigationItem
            id: qr_btn
            icon: "qrcode-scan"
            text: "Qr-Scan"
            disabled: True
            on_press: 
                screen_manager.progress(qr_screen)
                screen_manager.current= 'qrscreen'                
            on_release:
                qr_screen.on_focus()

        BaseMDNavigationItem
            id: order_btn
            icon: "package-variant-closed"
            text: "Pedidos"
            disabled: True
            on_press:
                screen_manager.current= 'ordersscreen'
                screen_manager.progress(orders_screen)
            on_release:                 
                qr_screen.close_cam()
                orders_screen.get_order()
              
            


